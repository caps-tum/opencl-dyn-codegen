<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>AMDAPPProfilerHelp: How To: Use the Command Line Interface</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="contents">
<h1><a class="anchor" name="UsingTheCommandLineSection">How To: Use the Command Line Interface </a></h1><ol>
<li>
Go to the location of the profiler binaries. See Step 1 in <a class="el" href="successfulinstallsection.html">How To: Confirm Successful Installation </a>. Alternatively, you can include the location of the profiler binaries into the system's path environment variable. </li>
<li>
Run the profiler using the following instructions. </li>
</ol>
<p>
Usage: <code>sprofile [options] &lt;InputApplication&gt; &lt;InputApplication's command line arguments&gt;</code> <br>
 Commands: <br>
<ul>
<li><b>-a [ --atpfile ] arg</b> Path to the .atp file. Optional when performing API trace.</li><li><b>-c [ --counterfile ] arg</b> Path to the counter file to enable selected counters (case-sensitive). If not provided, all counters will be used. Ignored when performing an API trace.</li><li><b>-e [ --envvar ] arg</b> Environment variable that should be defined when running the profiled application. Argument should be in the format NAME=VALUE.</li><li><b>-E [ --envvarfile ] arg</b> Path to a file containing a list of environment variables that should be defined when running the profiled application. The file should contain one line for each variable in the format NAME=VALUE.</li><li><b>-f [ --fullenv ]</b> The environment variables specified with the envvar switch represent the full environment block. If not specified, then the environment variables represent additions or changes to the system environment block.</li><li><b>-F [ --apifilterfile ] arg</b> Path to the API filter file which contains a list of OpenCL&trade; APIs to be filtered out when performing API trace.</li><li><b>-i [ --interval ] arg (=100)</b> Timeout interval. Ignored when not performing API trace and using timeout mode.</li><li><b>-k [ --kerneloutput ] arg</b> Output the specified kernel file. Ignored when performing an API trace. Valid argument values are: <br>
<ul>
<li><b>il</b>: output kernel IL files <br>
</li><li><b>isa</b>: output kernel ISA files <br>
</li><li><b>cl</b>: output kernel CL files <br>
</li><li><b>asm</b>: output DirectCompute shader ASM files <br>
</li><li><b>all</b>: output all files</li></ul>
</li><li><b>-l [ --list ]</b> Print the list of valid counter names.</li><li><b>-m [ --timeout ]</b> Flush Trace data periodically, default timeout interval is 100 milliseconds (can be changed with -i option). Ignored when not performing an API trace. (Windows only, this is the default mode for Linux.)</li><li><b>-M [ --maxapicalls ] (=1000000)</b> Maximum number of API calls. Ignored when not performing an API trace.</li><li><b>-n [ --nocollapse ]</b> Do not collapse consecutive identical clGetEventInfo calls into a single call in the trace output. Ignored when not performing an API trace.</li><li><b>-o [ --outputfile ] arg</b> Path to OutputFile. If not provided, the default is Session1.csv in an "AMD APP Profiler" directory under the current user's Documents directory; when performing an API trace, the default is cltrace.atp in the same location.</li><li><b>-O [ --occupancy ]</b> Generate kernel occupancy information file (.occupancy)</li><li><b>-P [ --occupancydisplay ] arg</b> Path to configuration file to use to generate an occupancy display file. The occupancy display file to generate should be specified with --outputfile. See below for information on the configuration file format.</li><li><b>-r [ --ret ]</b> Always include the OpenCL&trade; API return code in API trace even if client application doesn't query it. Ignored when not performing an API trace.</li><li><b>-R [ --apirulesfile ] arg</b> Path to OpenCL&trade; API analyzer configuration file. If not specified, all rules are enabled. Ignored when --tracesummary is not specified.</li><li><b>-s [ --outputseparator ] arg</b> Character used to separate fields in the OutputFile. Ignored when performing an API trace.</li><li><b>-t [ --apitrace ]</b> Trace OpenCL&trade; application and generate CPU and GPU time stamps and detailed API call traces.</li><li><b>-T [ --tracesummary ]</b> Generate summary page from an input .atp file.</li><li><b>-v [ --version ]</b> Print the sprofile version number.</li><li><b>-V [ --verbose ]</b> Print out profiling result in console.</li><li><b>-w [ --workingdirectory ] arg</b> Set the working directory. If not provided, the default is the app binary's path.</li><li><b>-y [ --sym ]</b> Generate symbol information file (.st) for API trace if available. Ignored when not performing an API trace. (Windows only)</li><li><b>-h [ --help ]</b> Produce this help message.</li></ul>
<p>
<h3>Examples</h3>
<p>
<ul>
<li>
An example to collect performance counters: <p>
<code>sprofile -o "/path/to/output.csv" -w "/path/to/app/working/directory" "/path/to/app.exe" "--device gpu"</code> <p>
</li>
<li>
An example to collect API trace: <p>
<code>sprofile -o "/path/to/output.atp" -t -w "/path/to/app/working/directory" "/path/to/app.exe" "--device gpu"</code> <p>
</li>
<li>
An example to collect API trace with summary pages: <p>
<code>sprofile -o "/path/to/output.atp" -t -T -w "/path/to/app/working/directory" "/path/to/app.exe" "--device gpu"</code> <p>
</li>
<li>
An example to generate summary pages from .atp file: <p>
<code>sprofile -a "/path/to/output.atp" -T</code> <p>
</li>
<li>
An example to generate an occupancy display page: <p>
<code>sprofile -P "/path/to/occupancy/params/file.txt" -o "path/to/output.html"</code>  </li>
</ul>
<p>
After you have used the command line to profile an application, you can view the results within the Visual Studio plugin using the <b>Import Profile Result</b> command in the <a class="el" href="clsessionexplorerpage.html">APP Profiler Session Explorer</a>.<p>
The format of the configuration files passed to the --counterfile, --apirulesfile, --apifilterfile, and --occupancydisplay options can be found in the <a class="el" href="clconfigfiles.html">Description of Configuration Files </a> topic. </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Apr 16 10:53:42 2012 for AMDAPPProfilerHelp by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
